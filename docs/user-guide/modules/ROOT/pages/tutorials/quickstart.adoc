= Quickstart Tutorial
include::partial$attributes.adoc[]

[abstract]
--
Get Boundary up and running on your machine in 15-30 minutes. This hands-on tutorial walks you through installation, running tests, starting the REPL system, and making your first CLI and REST API calls.
--

[[prerequisites]]
== Prerequisites

=== macOS Installation

Boundary requires Java and Clojure CLI tools:

[source,{shell}]
----
# Install Java and Clojure using Homebrew
brew install openjdk clojure/tools/clojure
----

=== Linux Installation

[source,bash]
----
# Install JDK
sudo apt-get update
sudo apt-get install -y default-jdk rlwrap

# Install Clojure CLI
curl -L -O https://download.clojure.org/install/linux-install-1.12.3.1577.sh
chmod +x linux-install-*.sh
sudo ./linux-install-*.sh
----

=== Verify Installation

Confirm Java and Clojure are installed:

[source,{shell}]
----
java -version
clojure --version
----

[[installation]]
== Clone and Setup

=== Get the Code

[source,{shell}]
----
# Clone the repository
git clone {repo-url} boundary
cd boundary

# Verify you're in the right place
ls -la deps.edn
----

You should see `deps.edn` in the project root.

[[verify-installation]]
== Verify Your Setup

=== Run the Test Suite

Boundary's tests require the H2 database driver. Run all tests to verify your environment:

[source,{shell}]
----
clojure -M:test:db/h2
----

[TIP]
====
**Why `:db/h2`?**

The `:db/h2` alias loads the H2 in-memory database driver needed for tests. Without it, tests will fail with database connection errors.
====

**Expected output:**
----
Running tests...
162 tests, 0 failures, 0 errors
----

If tests pass, your environment is correctly configured! âœ…

[[start-the-system]]
== Start the Development System

=== Launch the REPL

Start an interactive REPL (Read-Eval-Print Loop) for development:

[source,{shell}]
----
clojure -M:repl-clj
----

**Expected output:**
----
nREPL server started on port {default-repl-port} on host localhost...
----

[NOTE]
====
The REPL starts on port **{default-repl-port}** by default. If this port is already in use, you'll see an error. See {xref-troubleshooting}[Troubleshooting] for solutions.
====

=== Load and Start the System

In the REPL prompt, load the system management utilities:

[source,clojure]
----
user=> (require '[integrant.repl :as ig-repl])
nil
user=> (require '[boundary.config :as config])
nil
----

Now start the Boundary system:

[source,clojure]
----
user=> (ig-repl/go)
:initiated
----

**What just happened?**

* âœ… SQLite database initialized at `dev-database.db`
* âœ… HTTP server started on `{default-api-url}`
* âœ… User module loaded and ready

[TIP]
====
**REPL Development Workflow:**

* `(ig-repl/go)` - Start system
* `(ig-repl/reset)` - Reload code and restart
* `(ig-repl/halt)` - Stop system
====

Leave the REPL running and **open a new terminal** for the next steps.

[[first-operations-cli]]
== First Operations via CLI

The CLI provides command-line tools for managing users and sessions. Let's create your first user.

=== Create a User

In a **new terminal** (keeping REPL running), navigate to the project directory:

[source,{shell}]
----
cd /path/to/boundary

# Create a user with the CLI
clojure -M:cli user create \
  --email alice@example.com \
  --name "Alice Doe" \
  --role user \
  --tenant-id 550e8400-e29b-41d4-a716-446655440000
----

**Expected output** (table format):
----
+---------------------------------+-------------------+----------+------+--------+---------------------+
| ID                              | Email             | Name     | Role | Active | Created             |
+---------------------------------+-------------------+----------+------+--------+---------------------+
| 123e4567-e89b-12d3-a456-426...  | alice@example.com | Alice... | user | true   | 2025-01-06 12:34:56 |
+---------------------------------+-------------------+----------+------+--------+---------------------+
----

[NOTE]
====
**UUIDs as identifiers:**

Boundary uses UUIDs for all entity IDs. The `tenant-id` here is a placeholder UUID. In a multi-tenant application, each organization would have its own tenant ID.
====

=== List Users

View all users for a tenant:

[source,{shell}]
----
clojure -M:cli user list \
  --tenant-id 550e8400-e29b-41d4-a716-446655440000
----

You'll see Alice in the list.

=== CLI Output Formats

The CLI supports both table and JSON output:

[source,{shell}]
----
# JSON format for scripting
clojure -M:cli user list \
  --tenant-id 550e8400-e29b-41d4-a716-446655440000 \
  --format json
----

**JSON output:**
[source,json]
----
{
  "users": [
    {
      "id": "123e4567-e89b-12d3-a456-426614174000",
      "email": "alice@example.com",
      "name": "Alice Doe",
      "role": "user",
      "active": true,
      "createdAt": "2025-01-06T12:34:56Z"
    }
  ],
  "count": 1
}
----

[TIP]
====
For complete CLI documentation, see {xref-cli-guide}[CLI User Manual].
====

[[first-operations-rest]]
== First Operations via REST API

Boundary provides a REST API on `{default-api-url}`. Let's interact with it using `curl`.

=== Set the API URL

[source,{shell}]
----
export BND_API_URL={default-api-url}
----

=== Create a User via API

[source,{shell}]
----
curl -s -X POST "$BND_API_URL/api/users" \
  -H 'Content-Type: application/json' \
  -d '{
    "email": "bob@example.com",
    "name": "Bob Smith",
    "password": "temporary-password",
    "role": "user",
    "tenantId": "550e8400-e29b-41d4-a716-446655440000"
  }' | jq
----

**Expected response:**
[source,json]
----
{
  "id": "987fcdeb-51a2-43d7-8e9f-...",
  "email": "bob@example.com",
  "name": "Bob Smith",
  "role": "user",
  "active": true,
  "tenantId": "550e8400-e29b-41d4-a716-446655440000",
  "createdAt": "2025-01-06T12:45:00Z"
}
----

[NOTE]
====
**Response format:**

REST API responses use `camelCase` for JSON field names, while internal code uses `kebab-case`. This conversion happens automatically in the HTTP layer.
====

=== List Users via API

[source,{shell}]
----
curl -s "$BND_API_URL/api/users?tenantId=550e8400-e29b-41d4-a716-446655440000" | jq
----

**Response:**
[source,json]
----
{
  "users": [
    { "id": "...", "email": "alice@example.com", ... },
    { "id": "...", "email": "bob@example.com", ... }
  ],
  "totalCount": 2,
  "limit": 20,
  "offset": 0
}
----

=== Explore the API Documentation

Boundary provides interactive API documentation:

[source,{shell}]
----
# Open in your browser
open http://localhost:3000/api-docs/
----

You'll see the Swagger UI with all available endpoints documented.

[[understanding-code-structure]]
== Understanding the Code Structure

=== Where Does the Code Live?

Boundary follows a **module-centric architecture**. Let's explore the user module:

[source,{shell}]
----
tree src/boundary/user -L 2
----

**Structure:**
----
src/boundary/user/
â”œâ”€â”€ schema.clj              # Domain entities (Malli schemas)
â”œâ”€â”€ ports.clj               # Repository interfaces (protocols)
â”œâ”€â”€ core/
â”‚   â””â”€â”€ user.clj           # Pure business logic functions
â””â”€â”€ shell/
    â”œâ”€â”€ service.clj        # Database-agnostic orchestration
    â”œâ”€â”€ persistence.clj    # Database adapter implementation
    â”œâ”€â”€ http.clj          # REST API handlers
    â””â”€â”€ cli.clj           # CLI command handlers
----

[TIP]
====
**Key architectural layers:**

* **Core** (`core/user.clj`) - Pure business logic with no side effects
* **Ports** (`ports.clj`) - Abstract interfaces for dependencies  
* **Shell** (`shell/`) - Infrastructure: database, HTTP, CLI
====

Learn more: {xref-modules}[Modules and Domain Ownership] | {xref-fc-is}[Functional Core / Imperative Shell]

=== Example: Where User Creation Happens

Let's trace a user creation request:

1. **HTTP Handler** (`shell/http.clj`) receives POST request
2. **Service Layer** (`shell/service.clj`) orchestrates the operation
3. **Core Logic** (`core/user.clj`) validates business rules
4. **Persistence** (`shell/persistence.clj`) saves to database

[[next-steps]]
== Next Steps

âœ… You've successfully:

* Installed and verified Boundary
* Started the development system
* Created users via CLI and REST API
* Explored the codebase structure

=== Continue Learning

**Hands-on tasks:**

* xref:how-to/add-entity.adoc[Add a Domain Entity] - Create your first entity
* xref:how-to/run-tests-and-watch.adoc[Set Up Test-Driven Development] - Test workflow
* xref:how-to/configure-db.adoc[Configure a Different Database] - Switch to PostgreSQL

**Understand the architecture:**

* {xref-fc-is}[Functional Core / Imperative Shell Pattern]
* {xref-modules}[Module Organization and Boundaries]
* {xref-ports}[Ports and Adapters for Dependency Inversion]

**Reference materials:**

* {xref-commands}[Commands Reference] - All available CLI commands
* {xref-cli-guide}[Complete CLI Manual] - Full CLI documentation
* {xref-arch-overview}[Architecture Overview] - Deep dive into design

=== Get Help

Run into issues? Check {xref-troubleshooting}[Troubleshooting Guide] for common problems and solutions.

---

**Congratulations!** You're now ready to build with Boundary. ðŸŽ‰
