= Error Code Catalog
:revdate: 2025-11-03
:toc:
:toclevels: 3

== Overview

This document provides a comprehensive catalog of all validation error codes used in the Boundary framework, along with their message templates, resolution steps, and examples.

=== Error Code Format

Error codes follow a hierarchical naming convention:

[source]
----
:domain.field/error-type
----

**Examples:**

- `:user.email/required` - User module, email field, required validation
- `:user.email/invalid-format` - User module, email field, format validation
- `:billing.amount/out-of-range` - Billing module, amount field, range validation

=== Error Categories

[cols="1,3"]
|===
|Category |Description

|`:required`
|Missing required field

|`:invalid-format`
|Format validation failure (regex, email, UUID, etc.)

|`:invalid-value`
|Value doesn't match allowed enumeration

|`:out-of-range`
|Numeric or date value outside allowed range

|`:too-short`
|String or collection below minimum length

|`:too-long`
|String or collection above maximum length

|`:duplicate`
|Uniqueness constraint violation

|`:not-found`
|Referenced entity doesn't exist

|`:forbidden`
|Operation not allowed by business rules

|`:dependency`
|Depends on another field or condition
|===

== Message Templates

=== Template Structure

Each error code has an associated message template that can be interpolated with parameters:

[source,clojure]
----
{:code :user.email/required
 :template "{{field-name}} is required"
 :params {:field-name "Email"}
 :suggestion "Provide an email address for the user"}
----

**Rendered:**
[source]
----
Email is required
Suggestion: Provide an email address for the user
----

=== Parameter Naming Conventions

[cols="1,2,2"]
|===
|Parameter |Usage |Example

|`{{field-name}}`
|Human-readable field name
|"Email", "User Name", "Tenant ID"

|`{{value}}`
|Actual value provided (sanitized)
|`"john@example"`, `"abc"`, `"5"`

|`{{expected}}`
|Expected value or format
|`"user@domain.com"`, `"admin\|user\|viewer"`, `"1-100"`

|`{{min}}` / `{{max}}`
|Numeric or length bounds
|`"8"`, `"255"`, `"1"`, `"1000"`

|`{{current}}`
|Current value in context
|`"user"`, `"active"`, `"draft"`

|`{{allowed}}`
|List of allowed values
|`"admin, user, viewer"`, `"pending, approved, rejected"`

|`{{regex}}`
|Regular expression pattern (simplified)
|`"letters and numbers only"`, `"valid email format"`

|`{{dependency}}`
|Dependent field name
|`"Tenant ID"`, `"User Role"`, `"Payment Method"`
|===

== Common Error Codes

=== Required Field Errors

==== `:required`

**Description:** Generic required field validation failure

**Message Template:**
[source]
----
{{field-name}} is required
----

**Suggestion Template:**
[source]
----
Provide a value for {{field-name}}
----

**Example:**
[source,json]
----
{
  "field": "email",
  "code": "required",
  "message": "Email is required",
  "params": {"field-name": "Email"},
  "path": ["email"],
  "suggestion": "Provide a value for Email"
}
----

**Resolution Steps:**

1. Add the required field to your request
2. Ensure the field is not null or empty
3. Check API documentation for required fields

=== Format Validation Errors

==== `:invalid-format`

**Description:** Field format doesn't match expected pattern

**Message Template:**
[source]
----
{{field-name}} has an invalid format
----

**Detailed Template:**
[source]
----
{{field-name}} must match the format: {{expected}}
----

**Suggestion Template:**
[source]
----
Provide {{field-name}} in the correct format. Expected: {{expected}}
----

**Example:**
[source,json]
----
{
  "field": "email",
  "code": "invalid-format",
  "message": "Email has an invalid format",
  "params": {
    "field-name": "Email",
    "value": "bad@email",
    "expected": "user@domain.com"
  },
  "path": ["email"],
  "suggestion": "Provide Email in the correct format. Expected: user@domain.com"
}
----

**Resolution Steps:**

1. Check the format requirements in API documentation
2. Validate your input matches the expected pattern
3. Use provided examples as reference

=== Value Validation Errors

==== `:invalid-value`

**Description:** Value is not in the allowed set

**Message Template:**
[source]
----
{{field-name}} has an invalid value: "{{value}}"
----

**Detailed Template:**
[source]
----
{{field-name}} must be one of: {{allowed}}
----

**Suggestion Template (with "did you mean"):**
[source]
----
Invalid value "{{value}}" for {{field-name}}. Did you mean "{{suggestion}}"? 
Allowed values: {{allowed}}
----

**Example:**
[source,json]
----
{
  "field": "role",
  "code": "invalid-value",
  "message": "Role has an invalid value: \"moderater\"",
  "params": {
    "field-name": "Role",
    "value": "moderater",
    "allowed": "admin, user, viewer",
    "suggestion": "moderator"
  },
  "path": ["role"],
  "suggestion": "Invalid value \"moderater\" for Role. Did you mean \"moderator\"? Allowed values: admin, user, viewer"
}
----

**Resolution Steps:**

1. Check the "Did you mean?" suggestion if provided
2. Review the list of allowed values
3. Verify correct spelling and casing

=== Range Validation Errors

==== `:out-of-range`

**Description:** Numeric or date value outside allowed range

**Message Template:**
[source]
----
{{field-name}} is out of range
----

**Detailed Template:**
[source]
----
{{field-name}} must be between {{min}} and {{max}}
----

**Suggestion Template:**
[source]
----
Provide {{field-name}} between {{min}} and {{max}}. You provided: {{value}}
----

**Example:**
[source,json]
----
{
  "field": "age",
  "code": "out-of-range",
  "message": "Age is out of range",
  "params": {
    "field-name": "Age",
    "value": "150",
    "min": "0",
    "max": "120"
  },
  "path": ["age"],
  "suggestion": "Provide Age between 0 and 120. You provided: 150"
}
----

**Resolution Steps:**

1. Check the allowed range in the error message
2. Verify your value is within bounds
3. Ensure correct units (e.g., seconds vs milliseconds)

=== Length Validation Errors

==== `:too-short`

**Description:** String or collection below minimum length

**Message Template:**
[source]
----
{{field-name}} is too short
----

**Detailed Template:**
[source]
----
{{field-name}} must be at least {{min}} characters
----

**Example:**
[source,json]
----
{
  "field": "password",
  "code": "too-short",
  "message": "Password is too short",
  "params": {
    "field-name": "Password",
    "min": "8",
    "current-length": "5"
  },
  "path": ["password"],
  "suggestion": "Provide Password with at least 8 characters"
}
----

==== `:too-long`

**Description:** String or collection above maximum length

**Message Template:**
[source]
----
{{field-name}} is too long
----

**Detailed Template:**
[source]
----
{{field-name}} must be at most {{max}} characters
----

**Example:**
[source,json]
----
{
  "field": "name",
  "code": "too-long",
  "message": "Name is too long",
  "params": {
    "field-name": "Name",
    "max": "255",
    "current-length": "300"
  },
  "path": ["name"],
  "suggestion": "Provide Name with at most 255 characters"
}
----

=== Business Rule Errors

==== `:duplicate`

**Description:** Uniqueness constraint violation

**Message Template:**
[source]
----
{{field-name}} already exists
----

**Contextual Template:**
[source]
----
A {{entity}} with this {{field-name}} already exists
----

**Suggestion Template:**
[source]
----
Choose a different {{field-name}}. The value "{{value}}" is already in use.
----

**Example:**
[source,json]
----
{
  "field": "email",
  "code": "duplicate",
  "message": "Email already exists",
  "params": {
    "field-name": "Email",
    "entity": "user",
    "value": "john@example.com"
  },
  "path": ["email"],
  "suggestion": "Choose a different Email. The value \"john@example.com\" is already in use.",
  "http_status": 409
}
----

**Resolution Steps:**

1. Choose a different unique value
2. Check if updating the existing record is more appropriate
3. Contact your administrator if this seems incorrect

==== `:not-found`

**Description:** Referenced entity doesn't exist

**Message Template:**
[source]
----
{{entity}} not found
----

**Contextual Template:**
[source]
----
Cannot {{operation}} {{entity}}: {{entity}} not found
----

**Example:**
[source,json]
----
{
  "field": "id",
  "code": "not-found",
  "message": "User not found",
  "params": {
    "entity": "user",
    "operation": "update",
    "id": "550e8400-e29b-41d4-a716-446655440000"
  },
  "path": ["id"],
  "suggestion": "Verify the ID or reference exists",
  "http_status": 404
}
----

**Resolution Steps:**

1. Verify the ID or reference exists
2. Check if the resource was recently deleted
3. Ensure you have permission to access the resource

==== `:forbidden`

**Description:** Operation not allowed by business rules

**Message Template:**
[source]
----
Cannot modify {{field-name}}
----

**Detailed Template:**
[source]
----
{{field-name}} cannot be changed after {{reason}}
----

**Example:**
[source,json]
----
{
  "field": "tenant-id",
  "code": "forbidden",
  "message": "Cannot modify Tenant ID",
  "params": {
    "field-name": "Tenant ID",
    "reason": "user creation"
  },
  "path": ["tenant-id"],
  "suggestion": "Tenant ID cannot be changed after user creation. Create a new user if a different tenant is needed.",
  "http_status": 403
}
----

**Resolution Steps:**

1. Review the constraint mentioned in the error
2. Check if an alternative operation is available
3. Consult API documentation for allowed operations

==== `:dependency`

**Description:** Field depends on another field or condition

**Message Template:**
[source]
----
{{field-name}} requires {{dependency}}
----

**Detailed Template:**
[source]
----
{{field-name}} can only be set when {{dependency}} is {{expected}}
----

**Example:**
[source,json]
----
{
  "field": "billing-address",
  "code": "dependency",
  "message": "Billing Address requires Payment Method",
  "params": {
    "field-name": "Billing Address",
    "dependency": "Payment Method"
  },
  "path": ["billing-address"],
  "suggestion": "Provide Payment Method before setting Billing Address",
  "http_status": 422
}
----

**Resolution Steps:**

1. Identify the required dependency field
2. Provide valid value for the dependency
3. Ensure correct order of operations

== User Module Error Codes

This section documents all error codes specific to the User module.

=== User Email Validation

==== `:user.email/required`

**Category:** Schema Validation

**Description:** Email field is required for user creation

**When it occurs:** 
- Creating a user without email field
- Email field is null or empty string

**Message Templates:**

[source]
----
;; Default
"Email is required"

;; With operation context
"Email is required when creating a user"

;; With role guidance (admin)
"Email is required when creating a user. You have full access to perform this operation."

;; With role guidance (viewer)
"Email is required when creating a user. You have view-only access. Contact your administrator to request changes."
----

**Suggestion:**
[source]
----
"Provide an email address for the user"
----

**Resolution Steps:**

1. Add the email field to your request
2. Ensure the field is not null or empty
3. Check API documentation for required fields

**Example JSON:**
[source,json]
----
{
  "field": "email",
  "code": "user.email/required",
  "message": "Email is required when creating a user",
  "params": {
    "field-name": "Email",
    "entity": "user",
    "operation": "create"
  },
  "path": ["email"],
  "suggestion": "Provide an email address for the user",
  "next-steps": "Next steps:\n1. Add the email field to your request\n2. Ensure the field is not null or empty\n3. Check API documentation for required fields",
  "http_status": 422
}
----

==== `:user.email/invalid-format`

**Category:** Schema Validation

**Description:** Email format doesn't match required pattern

**When it occurs:**
- Email missing @ symbol
- Email missing domain
- Invalid characters in email

**Message Templates:**

[source]
----
;; Default
"Email format is invalid"

;; Detailed
"Email must match the format: user@domain.com"
----

**Suggestion:**
[source]
----
"Provide Email in the correct format. Expected: user@domain.com"
----

**Resolution Steps:**

1. Verify the format matches user@domain.com
2. Ensure it includes @ and a valid domain
3. Check for typos or special characters

**Example JSON:**
[source,json]
----
{
  "field": "email",
  "code": "user.email/invalid-format",
  "message": "Email format is invalid",
  "params": {
    "field-name": "Email",
    "value": "bad.email",
    "expected": "user@domain.com"
  },
  "path": ["email"],
  "suggestion": "Provide Email in the correct format. Expected: user@domain.com",
  "http_status": 422
}
----

==== `:user.email/duplicate`

**Category:** Business Rule

**Description:** Email already exists in the system

**When it occurs:**
- Attempting to create user with existing email
- Email uniqueness constraint violation

**Message Templates:**

[source]
----
;; Default
"Email already exists"

;; With context
"A user with this Email already exists"
----

**Suggestion:**
[source]
----
"Choose a different Email. The value \"{{value}}\" is already in use. Use the 'Forgot Password' link to access your account."
----

**Resolution Steps:**

1. Use a different email address
2. Check if you already have an account
3. Use password reset if you forgot your credentials

**Example JSON:**
[source,json]
----
{
  "field": "email",
  "code": "user.email/duplicate",
  "message": "A user with this Email already exists",
  "params": {
    "field-name": "Email",
    "entity": "user",
    "value": "john@example.com"
  },
  "path": ["email"],
  "suggestion": "Choose a different Email. The value \"john@example.com\" is already in use. Use the 'Forgot Password' link to access your account.",
  "http_status": 409
}
----

=== User Name Validation

==== `:user.name/required`

**Category:** Schema Validation

**Description:** Name field is required

**Message Template:**
[source]
----
"Name is required"
----

**Example JSON:**
[source,json]
----
{
  "field": "name",
  "code": "user.name/required",
  "message": "Name is required when creating a user",
  "params": {
    "field-name": "Name",
    "entity": "user",
    "operation": "create"
  },
  "path": ["name"],
  "suggestion": "Provide a name for the user",
  "http_status": 422
}
----

==== `:user.name/too-short`

**Category:** Schema Validation

**Description:** Name is below minimum length (1 character)

**Message Template:**
[source]
----
"Name is too short"
----

**Detailed Template:**
[source]
----
"Name must be at least 1 character"
----

**Example JSON:**
[source,json]
----
{
  "field": "name",
  "code": "user.name/too-short",
  "message": "Name must be at least 1 character",
  "params": {
    "field-name": "Name",
    "min": "1",
    "current-length": "0"
  },
  "path": ["name"],
  "suggestion": "Provide Name with at least 1 character",
  "http_status": 422
}
----

==== `:user.name/too-long`

**Category:** Schema Validation

**Description:** Name exceeds maximum length (255 characters)

**Message Template:**
[source]
----
"Name is too long"
----

**Detailed Template:**
[source]
----
"Name must be at most 255 characters"
----

**Example JSON:**
[source,json]
----
{
  "field": "name",
  "code": "user.name/too-long",
  "message": "Name must be at most 255 characters",
  "params": {
    "field-name": "Name",
    "max": "255",
    "current-length": "300"
  },
  "path": ["name"],
  "suggestion": "Provide Name with at most 255 characters",
  "http_status": 422
}
----

=== User Role Validation

==== `:user.role/required`

**Category:** Schema Validation

**Description:** Role field is required

**Message Template:**
[source]
----
"Role is required"
----

**Example JSON:**
[source,json]
----
{
  "field": "role",
  "code": "user.role/required",
  "message": "Role is required when creating a user",
  "params": {
    "field-name": "Role",
    "entity": "user",
    "operation": "create"
  },
  "path": ["role"],
  "suggestion": "Provide a role for the user",
  "http_status": 422
}
----

==== `:user.role/invalid-value`

**Category:** Schema Validation

**Description:** Role is not one of the allowed values

**Allowed Values:** `admin`, `user`, `viewer`

**Message Template:**
[source]
----
"Role must be one of: admin, user, viewer"
----

**Suggestion Template (with typo detection):**
[source]
----
"Did you mean \"admin\"? Allowed values: admin, user, viewer"
----

**Example JSON:**
[source,json]
----
{
  "field": "role",
  "code": "user.role/invalid-value",
  "message": "Role must be one of: admin, user, viewer",
  "params": {
    "field-name": "Role",
    "value": "admim",
    "allowed": "admin, user, viewer",
    "suggestion": "admin"
  },
  "path": ["role"],
  "suggestion": "Did you mean \"admin\"? Allowed values: admin, user, viewer",
  "http_status": 422
}
----

=== User Tenant Validation

==== `:user.tenant-id/required`

**Category:** Schema Validation

**Description:** Tenant ID is required for multi-tenant systems

**Message Template:**
[source]
----
"Tenant ID is required"
----

**Example JSON:**
[source,json]
----
{
  "field": "tenant-id",
  "code": "user.tenant-id/required",
  "message": "Tenant ID is required when creating a user",
  "params": {
    "field-name": "Tenant ID",
    "entity": "user",
    "operation": "create"
  },
  "path": ["tenant-id"],
  "suggestion": "Provide a valid tenant ID",
  "http_status": 422
}
----

==== `:user.tenant-id/invalid-uuid`

**Category:** Schema Validation

**Description:** Tenant ID is not a valid UUID format

**Message Template:**
[source]
----
"Tenant ID must be a valid UUID"
----

**Example JSON:**
[source,json]
----
{
  "field": "tenant-id",
  "code": "user.tenant-id/invalid-uuid",
  "message": "Tenant ID must be a valid UUID",
  "params": {
    "field-name": "Tenant ID",
    "value": "not-a-uuid",
    "expected": "550e8400-e29b-41d4-a716-446655440000"
  },
  "path": ["tenant-id"],
  "suggestion": "Provide Tenant ID in valid UUID format. Expected: 550e8400-e29b-41d4-a716-446655440000",
  "http_status": 422
}
----

==== `:user.tenant-id/forbidden`

**Category:** Business Rule

**Description:** Tenant ID cannot be changed after user creation

**When it occurs:**
- Attempting to update tenant-id on existing user
- Business rule violation

**Message Template:**
[source]
----
"Cannot modify Tenant ID"
----

**Detailed Template:**
[source]
----
"Tenant ID cannot be changed after user creation"
----

**Suggestion:**
[source]
----
"Tenant ID cannot be changed after user creation. Create a new user if a different tenant is needed."
----

**Resolution Steps:**

1. Review the immutability constraint
2. Create a new user in the target tenant if needed
3. Migrate user data manually if required

**Example JSON:**
[source,json]
----
{
  "field": "tenant-id",
  "code": "user.tenant-id/forbidden",
  "message": "Tenant ID cannot be changed after user creation",
  "params": {
    "field-name": "Tenant ID",
    "reason": "user creation"
  },
  "path": ["tenant-id"],
  "suggestion": "Tenant ID cannot be changed after user creation. Create a new user if a different tenant is needed.",
  "http_status": 403
}
----

=== User Password Validation

==== `:user.password/too-short`

**Category:** Schema Validation

**Description:** Password is below minimum length (8 characters)

**Message Template:**
[source]
----
"Password is too short"
----

**Detailed Template:**
[source]
----
"Password must be at least 8 characters"
----

**Suggestion:**
[source]
----
"Provide Password with at least 8 characters"
----

**Resolution Steps:**

1. Ensure password has at least 8 characters
2. Consider using a mix of letters, numbers, and symbols
3. Use a password manager for strong passwords

**Example JSON:**
[source,json]
----
{
  "field": "password",
  "code": "user.password/too-short",
  "message": "Password must be at least 8 characters",
  "params": {
    "field-name": "Password",
    "min": "8",
    "current-length": "5"
  },
  "path": ["password"],
  "suggestion": "Provide Password with at least 8 characters",
  "http_status": 422
}
----

== Error Code Summary Tables

=== User Module Error Codes

[cols="2,1,1,4"]
|===
|Code |Category |HTTP Status |Description

|`:user.email/required`
|Schema
|422
|Email field is required

|`:user.email/invalid-format`
|Schema
|422
|Email format doesn't match pattern

|`:user.email/duplicate`
|Business
|409
|Email already exists in system

|`:user.name/required`
|Schema
|422
|Name field is required

|`:user.name/too-short`
|Schema
|422
|Name below minimum length (1 char)

|`:user.name/too-long`
|Schema
|422
|Name exceeds maximum length (255 chars)

|`:user.role/required`
|Schema
|422
|Role field is required

|`:user.role/invalid-value`
|Schema
|422
|Role not in allowed set (admin, user, viewer)

|`:user.tenant-id/required`
|Schema
|422
|Tenant ID is required

|`:user.tenant-id/invalid-uuid`
|Schema
|422
|Tenant ID not valid UUID format

|`:user.tenant-id/forbidden`
|Business
|403
|Cannot change tenant-id after creation

|`:user.password/too-short`
|Schema
|422
|Password below minimum length (8 chars)
|===

== Cross-References

=== Related Documentation

- link:validation-guide.adoc[Validation Developer Guide] - Usage examples and integration patterns
- link:validation-patterns.adoc[Validation Patterns] - Message style guide and conventions
- link:adr/ADR-005-validation-devex-foundations.adoc[ADR-005] - Architectural decision record

=== API Documentation

- link:api/post-users-example.adoc[POST /users Example] - User creation API with validation examples

== Appendix: Error Code Conventions

=== Naming Convention

[source]
----
:domain.field/error-type
----

**Examples:**
- `:user.email/required` - User domain, email field, required error
- `:billing.amount/out-of-range` - Billing domain, amount field, range error

=== Error Categories

- **Schema**: Schema/format validation (required, format, type, length)
- **Business**: Business rule violations (duplicate, forbidden, dependency)
- **Cross-Field**: Validation across multiple fields
- **Context**: Context-dependent validation (role, tenant, state)

=== HTTP Status Code Mapping

[cols="1,2,3"]
|===
|Status |Usage |Error Types

|`400`
|Bad Request
|Malformed request, invalid JSON

|`403`
|Forbidden
|Business rule prevents operation (`:forbidden`)

|`404`
|Not Found
|Referenced resource doesn't exist (`:not-found`)

|`409`
|Conflict
|Uniqueness constraint violation (`:duplicate`)

|`422`
|Unprocessable Entity
|Schema validation failures (`:required`, `:invalid-format`, `:invalid-value`, `:too-short`, `:too-long`, `:out-of-range`)
|===

---

*This error code catalog is maintained as part of ADR-005: Validation Developer Experience Foundations. For implementation details, see link:validation-guide.adoc[Validation Developer Guide].*
  "field": "email",
  "code": "duplicate",
  "message": "Email already exists",
  "params": {
    "field-name": "Email",
    "value": "user@example.com",
    "entity": "user"
  },
  "path": ["email"],
  "suggestion": "Choose a different Email. The value \"user@example.com\" is already in use."
}
----

**Resolution Steps:**

1. Choose a different unique value
2. Check if the existing record can be updated instead
3. Contact administrator if you believe this is an error

==== `:forbidden`

**Description:** Operation not allowed by business rules

**Message Template:**
[source]
----
Cannot modify {{field-name}}
----

**Contextual Template:**
[source]
----
{{field-name}} cannot be changed {{reason}}
----

**Example:**
[source,json]
----
{
  "field": "tenant-id",
  "code": "forbidden",
  "message": "Cannot modify Tenant ID",
  "params": {
    "field-name": "Tenant ID",
    "reason": "after user creation"
  },
  "path": ["tenant-id"],
  "suggestion": "Tenant ID cannot be changed after user creation. Create a new user if needed."
}
----

**Resolution Steps:**

1. Review the reason in the error message
2. Check if an alternative operation is available
3. Consult API documentation for allowed operations

==== `:dependency`

**Description:** Field depends on another field or condition

**Message Template:**
[source]
----
{{field-name}} requires {{dependency}}
----

**Detailed Template:**
[source]
----
{{field-name}} can only be set when {{dependency}} is {{expected}}
----

**Example:**
[source,json]
----
{
  "field": "billing-address",
  "code": "dependency",
  "message": "Billing Address requires Payment Method",
  "params": {
    "field-name": "Billing Address",
    "dependency": "Payment Method"
  },
  "path": ["billing-address"],
  "suggestion": "Provide Payment Method before setting Billing Address"
}
----

== User Module Error Codes

=== `:user.email/required`

**Category:** Schema Validation

**Message:** "Email is required"

**Context:** User creation, user update

**Example Request:**

[source,json]
----
{
  "name": "John Doe",
  "role": "user"
}
----

**Example Error:**
[source,json]
----
{
  "field": "email",
  "code": "user.email/required",
  "message": "Email is required",
  "path": ["email"],
  "rule-id": "user.email/required",
  "suggestion": "Provide an email address for the user"
}
----

=== `:user.email/invalid-format`

**Category:** Schema Validation

**Message:** "Email format is invalid"

**Context:** User creation, user update

**Example Request:**
[source,json]
----
{
  "email": "not-an-email",
  "name": "John Doe",
  "role": "user"
}
----

**Example Error:**
[source,json]
----
{
  "field": "email",
  "code": "user.email/invalid-format",
  "message": "Email format is invalid",
  "params": {
    "value": "not-an-email",
    "expected": "user@domain.com"
  },
  "path": ["email"],
  "rule-id": "user.email/format",
  "suggestion": "Provide a valid email address (e.g., user@example.com)"
}
----

=== `:user.email/duplicate`

**Category:** Business Rule

**Message:** "Email already exists"

**Context:** User creation

**Example Request:**
[source,json]
----
{
  "email": "existing@example.com",
  "name": "John Doe",
  "role": "user"
}
----

**Example Error:**
[source,json]
----
{
  "field": "email",
  "code": "user.email/duplicate",
  "message": "A user with this email already exists",
  "params": {
    "value": "existing@example.com"
  },
  "path": ["email"],
  "rule-id": "user.email/unique",
  "suggestion": "Use a different email address or update the existing user"
}
----

**Resolution Steps:**

1. Verify the email address
2. Check if you intended to update an existing user
3. Use a different email if creating a new user

=== `:user.role/invalid-value`

**Category:** Schema Validation

**Message:** "Role is not valid"

**Context:** User creation, user update

**Allowed Values:** `admin`, `user`, `viewer`

**Example with "Did you mean?":**

**Request:**
[source,json]
----
{
  "email": "user@example.com",
  "name": "John Doe",
  "role": "admin"
}
----

**Error:**
[source,json]
----
{
  "field": "role",
  "code": "user.role/invalid-value",
  "message": "Role is not valid",
  "params": {
    "value": "admim",
    "allowed": "admin, user, viewer",
    "suggestion": "admin"
  },
  "path": ["role"],
  "rule-id": "user.role/enum",
  "suggestion": "Did you mean \"admin\"? Allowed roles: admin, user, viewer"
}
----

=== `:user.tenant-id/forbidden`

**Category:** Business Rule

**Message:** "Cannot change Tenant ID"

**Context:** User update

**Example Request:**
[source,http]
----
PUT /api/users/123
{
  "tenantId": "different-tenant-id"
}
----

**Example Error:**
[source,json]
----
{
  "field": "tenant-id",
  "code": "user.tenant-id/forbidden",
  "message": "Tenant ID cannot be changed after user creation",
  "params": {
    "current": "original-tenant-id",
    "attempted": "different-tenant-id"
  },
  "path": ["tenant-id"],
  "rule-id": "user.tenant-id/immutable",
  "suggestion": "Tenant ID is immutable. Create a new user if a different tenant is needed."
}
----

== Billing Module Error Codes

=== `:billing.amount/required`

**Category:** Schema Validation

**Message:** "Amount is required"

=== `:billing.amount/out-of-range`

**Category:** Business Rule

**Message:** "Amount is out of range"

**Context:** Payment processing, invoice creation

**Example:**
[source,json]
----
{
  "field": "amount",
  "code": "billing.amount/out-of-range",
  "message": "Amount must be between 0.01 and 999999.99",
  "params": {
    "value": "0",
    "min": "0.01",
    "max": "999999.99",
    "currency": "USD"
  },
  "path": ["amount"],
  "suggestion": "Provide an amount between 0.01 and 999999.99 USD"
}
----

=== `:billing.currency/invalid`

**Category:** Schema Validation

**Message:** "Currency code is invalid"

**Context:** Payment processing, invoice creation

**Allowed Values:** ISO 4217 currency codes (USD, EUR, GBP, etc.)

== Workflow Module Error Codes

=== `:workflow.status/required`

**Category:** Schema Validation

**Message:** "Status is required"

=== `:workflow.transition/forbidden`

**Category:** Business Rule

**Message:** "Status transition not allowed"

**Context:** Workflow state changes

**Example:**
[source,json]
----
{
  "field": "status",
  "code": "workflow.transition/forbidden",
  "message": "Cannot transition from 'approved' to 'draft'",
  "params": {
    "current": "approved",
    "attempted": "draft",
    "allowed-transitions": "completed, cancelled"
  },
  "path": ["status"],
  "rule-id": "workflow.status/valid-transition",
  "suggestion": "Valid transitions from 'approved': completed, cancelled"
}
----

== Contextual Messaging

=== Operation Context

Error messages can be tailored based on the operation:

[cols="1,2,2"]
|===
|Operation |Generic Message |Contextual Message

|CREATE
|"Email is required"
|"Email is required when creating a user"

|UPDATE
|"Tenant ID cannot be changed"
|"Tenant ID cannot be changed during user update"

|DELETE
|"User not found"
|"Cannot delete user: user not found"
|===

=== Role-Based Messaging

Messages can include role-specific guidance:

[source,json]
----
{
  "field": "role",
  "code": "user.role/forbidden",
  "message": "Cannot assign admin role",
  "params": {
    "user-role": "user",
    "attempted-role": "admin"
  },
  "suggestion": "You do not have permission to assign admin role. Contact your administrator."
}
----

=== Multi-Tenant Context

Messages can reference tenant-specific rules:

[source,json]
----
{
  "field": "email",
  "code": "user.email/invalid-format",
  "message": "Email domain not allowed for this tenant",
  "params": {
    "value": "user@external.com",
    "allowed-domains": "company.com, company.net"
  },
  "suggestion": "Use an email address from allowed domains: company.com, company.net"
}
----

== Best Practices

=== Writing Error Messages

**DO:**

- Use clear, concise language
- Start with the field name
- Provide specific, actionable guidance
- Include "did you mean?" suggestions when applicable
- Reference allowed values or ranges

**DON'T:**

- Use technical jargon unnecessarily
- Include sensitive information (PII, secrets)
- Be vague or generic ("Something went wrong")
- Blame the user ("You made a mistake")
- Use ALL CAPS or excessive punctuation

=== Example Payload Hints

When enabled, include a minimal valid example:

[source,json]
----
{
  "error": {
    "field": "email",
    "code": "user.email/required",
    "message": "Email is required",
    "path": ["email"],
    "suggestion": "Provide an email address for the user"},
  "example": {
    "email": "user@example.com",
    "name": "John Doe",
    "role": "user"
  }
}
----

=== Resolution Steps

Provide 2-3 concrete steps to fix the error:

1. Check the specific requirement mentioned
2. Verify your input matches the format/range
3. Consult documentation or contact support

---

*This catalog is auto-updated from the validation registry. Last generated: 2025-11-03*
