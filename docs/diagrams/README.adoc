= Elara Diagrams

== Overview

This directory contains PlantUML source files for all architectural and design diagrams used in Elara documentation.

== Diagram Types

=== Architecture Diagrams
* **c4-container.puml** - C4 Container diagram showing system context
* **component-overview.puml** - Component diagram showing Shell and Core interaction
* **ports-adapters.puml** - Detailed view of ports and adapters pattern (TODO)

=== Sequence Diagrams  
* **http-request-lifecycle.puml** - HTTP request processing flow
* **cli-command-lifecycle.puml** - CLI command processing flow
* **web-frontend-interaction.puml** - Web UI state management flow (TODO)

=== Data Flow Diagrams
* **validation-pipeline.puml** - Malli validation and coercion flow
* **dto-boundaries.puml** - Data movement between layers (TODO)

== Rendering Diagrams

=== Prerequisites
[source,bash]
----
# Install PlantUML (requires Java)
# macOS with Homebrew
brew install plantuml

# Or download JAR directly
wget https://github.com/plantuml/plantuml/releases/download/v1.2023.12/plantuml-1.2023.12.jar
----

=== Local Rendering
[source,bash]
----
# Render single diagram to PNG
plantuml component-overview.puml

# Render all diagrams
plantuml *.puml

# Render to SVG (better for web)
plantuml -tsvg component-overview.puml

# Watch for changes and auto-render
plantuml -gui
----

=== Integration with AsciiDoc

Diagrams are embedded in documentation using include directives:

[source,asciidoc]
----
.System Architecture Overview
[plantuml, target=diagram-container, format=png]
....
include::c4-container.puml[]
....
----

Or reference pre-rendered images:

[source,asciidoc]
----
.Component Overview
image::../component-overview.png[Component Diagram, 800]
----

== Diagram Standards

=== Style Guidelines
* Use consistent colors and fonts
* Keep diagrams simple and focused
* Include clear titles and legends
* Use standard UML notation
* Prefer horizontal layout for sequence diagrams

=== Naming Conventions
* Use kebab-case for file names
* Include diagram type in name (e.g., `user-flow-sequence.puml`)
* Use descriptive names that match documentation sections

=== Content Guidelines
* Focus on one architectural concern per diagram
* Include enough detail to be useful, not overwhelming
* Use consistent terminology from glossary
* Add notes for complex interactions
* Version diagrams when architecture changes significantly

== Maintenance

=== Update Process
1. Edit PlantUML source files
2. Test rendering locally
3. Update documentation references if needed
4. Commit both source and rendered images
5. Verify diagrams display correctly in documentation

=== Review Checklist
* [ ] Diagram accurately reflects current implementation
* [ ] All components and relationships are labeled
* [ ] Colors and styling are consistent
* [ ] Diagram fits well in documentation context
* [ ] Source file is properly formatted and commented
