{;; =============================================================================
 ;; Development Environment Configuration  
 ;; =============================================================================

 :active
 {;; Core application settings (always active)
  :boundary/settings
  {:name "boundary-dev"
   :version "0.1.0"
   :date-format "yyyy-MM-dd"
   :date-time-format "yyyy-MM-dd HH:mm:ss"
   :currency/iso-code "EUR"

  ;; Default tenant ID for development
  ;; This provides a consistent tenant context for:
  ;; - REPL development and testing
  ;; - CLI operations without explicit tenant specification
  ;; - Default test fixtures
  ;; Production systems should NOT rely on defaults and must always specify tenant-id
   :default-tenant-id #or [#env DEFAULT_TENANT_ID "26f9ab85-27e6-44df-955e-84a7dde643ff"]

   ;; Feature flags
   :features
   {:user-web-ui {:enabled? #or [#env BND_WEB_UI_ENABLED true]}}

   ;; User validation configuration
   :user-validation
   {:email-domain-allowlist #{} ; Empty set means all domains allowed in dev
    :password-policy {:min-length 6 ; More lenient for dev
                      :max-length 128
                      :require-uppercase? false
                      :require-lowercase? false
                      :require-numbers? false
                      :require-special-chars? false
                      :forbidden-patterns #{}}
    :name-restrictions {:min-length 1
                        :max-length 100
                        :allowed-chars-regex "[a-zA-Z\\s\\-'.]+"
                        :forbidden-names #{}}
    :role-restrictions {:allowed-roles #{:user :admin :manager}
                        :admin-email-domains #{} ; Empty means any domain can be admin in dev
                        :default-role :user}
    :tenant-limits {:max-users-per-tenant 1000 ; Higher limit for dev
                    :check-enabled? false} ; Disabled in dev for easier testing
    :cross-field-validation {:admin-requires-company-email? false ; Relaxed for dev
                             :manager-requires-department? false}}}

  ;; Active database configurations
  ;; Only databases listed here will be loaded and initialized

  ;; SQLite for file-based development (active)
  :boundary/sqlite
  {:db "dev-database.db"
   :pool {:minimum-idle 1
          :maximum-pool-size 3
          :connection-timeout-ms 10000}}

  ;; HTTP Server configuration
  :boundary/http
  {:port #or [#env HTTP_PORT 3000]
   :host #or [#env HTTP_HOST "0.0.0.0"]
   :join? false
   ;; Port conflict resolution - if default port is busy, system will try higher ports
   :port-range {:start 3000 :end 3099}}

  ;; Observability configurations
  ;; Using no-op providers by default - can be switched to real providers per need

  :boundary/logging
  {:provider :no-op}

  :boundary/metrics
  {:provider :no-op}

  :boundary/error-reporting
  {:provider :no-op}}

 :inactive
 {;; Inactive database configurations
  ;; These are available for reference but won't be loaded unless moved to :active

  :boundary/postgresql
  {:host #env "POSTGRES_HOST"
   :port #env "POSTGRES_PORT"
   :dbname #env "POSTGRES_DB"
   :user #env "POSTGRES_USER"
   :password #env "POSTGRES_PASSWORD"
   :auto-commit true
   :pool {:minimum-idle 5
          :maximum-pool-size 15
          :connection-timeout-ms 30000}}

  :boundary/mysql
  {:host #env "MYSQL_HOST"
   :port #env "MYSQL_PORT"
   :dbname #env "MYSQL_DB"
   :user #env "MYSQL_USER"
   :password #env "MYSQL_PASSWORD"
   :pool {:minimum-idle 5
          :maximum-pool-size 15
          :connection-timeout-ms 30000}}

  :boundary/sqlite
  {:db "dev-database.db"
   :pool {:minimum-idle 1
          :maximum-pool-size 3
          :connection-timeout-ms 10000}}

  :boundary/h2
  {:memory true ; For fast in-memory testing
   :pool {:minimum-idle 1
          :maximum-pool-size 10}}

   ;; Example observability configurations for future use
   ;; Move to :active section when you need real providers

  :boundary/logging-with-file
  {:provider :file
   :level :debug
   :file "logs/dev-service.log"
   :format :json}

  :boundary/metrics-with-prometheus
  {:provider :prometheus
   :port 9090
   :path "/metrics"}

  :boundary/error-reporting-with-sentry
  {:provider :sentry
   :dsn #env "SENTRY_DSN"
   :environment "development"}}}


